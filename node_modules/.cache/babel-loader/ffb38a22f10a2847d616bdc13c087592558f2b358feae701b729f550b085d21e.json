{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asus\\\\OneDrive\\\\Desktop\\\\Digital GramPanchyat\\\\frontend\\\\src\\\\admin\\\\ManageGallery.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport \"./ManageGallery.css\";\n\n/* ‚úÖ CLOUD BACKEND */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API = \"https://backend-9i6n.onrender.com\";\nconst ManageGallery = () => {\n  _s();\n  const [images, setImages] = useState([]);\n  const [file, setFile] = useState(null);\n  const [caption, setCaption] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  /* ===== POPUP ===== */\n  const [popup, setPopup] = useState({\n    show: false,\n    message: \"\",\n    type: \"success\" // success | error\n  });\n  const token = localStorage.getItem(\"token\");\n\n  /* ===== POPUP HANDLER ===== */\n  const showPopup = (message, type = \"success\") => {\n    setPopup({\n      show: true,\n      message,\n      type\n    });\n    setTimeout(() => {\n      setPopup({\n        show: false,\n        message: \"\",\n        type: \"success\"\n      });\n    }, 1000);\n  };\n\n  /* ===== FETCH IMAGES ===== */\n  const fetchImages = async () => {\n    try {\n      const res = await fetch(`${API}/api/gallery`);\n      const data = await res.json();\n      setImages(Array.isArray(data) ? data : []);\n    } catch {\n      showPopup(\"Failed to load gallery ‚ùå\", \"error\");\n    }\n  };\n  useEffect(() => {\n    fetchImages();\n  }, []);\n\n  /* ===== UPLOAD IMAGE ===== */\n  const uploadImage = async e => {\n    e.preventDefault();\n    if (!file) {\n      showPopup(\"Please select an image\", \"error\");\n      return;\n    }\n    setLoading(true);\n    const formData = new FormData();\n    formData.append(\"image\", file);\n    formData.append(\"caption\", caption);\n    try {\n      await fetch(`${API}/api/gallery`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        body: formData\n      });\n      setFile(null);\n      setCaption(\"\");\n      fetchImages();\n      showPopup(\"Image uploaded successfully ‚úÖ\", \"success\");\n    } catch {\n      showPopup(\"Upload failed ‚ùå\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /* ===== DELETE IMAGE ===== */\n  const deleteImage = async id => {\n    if (!window.confirm(\"Delete this image?\")) return;\n    try {\n      await fetch(`${API}/api/gallery/${id}`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      fetchImages();\n      showPopup(\"Image deleted successfully üóëÔ∏è\", \"success\");\n    } catch {\n      showPopup(\"Delete failed ‚ùå\", \"error\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"manage-gallery\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Manage Gallery\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: uploadImage,\n      className: \"gallery-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: e => setFile(e.target.files[0]),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Caption\",\n        value: caption,\n        onChange: e => setCaption(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        children: loading ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"btn-loader\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 22\n        }, this) : \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gallery-grid\",\n      children: images.map(img => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: img.image,\n          alt: img.caption || \"Gallery\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: img.caption\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteImage(img._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this)]\n      }, img._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), popup.show && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `popup ${popup.type}`,\n        children: [popup.type === \"success\" ? \"‚úÖ\" : \"‚ùå\", /*#__PURE__*/_jsxDEV(\"p\", {\n          children: popup.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n_s(ManageGallery, \"XzSasY7QLPKZ2X62isGO+S+a0yk=\");\n_c = ManageGallery;\nexport default ManageGallery;\nvar _c;\n$RefreshReg$(_c, \"ManageGallery\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","API","ManageGallery","_s","images","setImages","file","setFile","caption","setCaption","loading","setLoading","popup","setPopup","show","message","type","token","localStorage","getItem","showPopup","setTimeout","fetchImages","res","fetch","data","json","Array","isArray","uploadImage","e","preventDefault","formData","FormData","append","method","headers","Authorization","body","deleteImage","id","window","confirm","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","target","files","required","placeholder","value","disabled","map","img","src","image","alt","onClick","_id","_c","$RefreshReg$"],"sources":["C:/Users/Asus/OneDrive/Desktop/Digital GramPanchyat/frontend/src/admin/ManageGallery.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./ManageGallery.css\";\r\n\r\n/* ‚úÖ CLOUD BACKEND */\r\nconst API = \"https://backend-9i6n.onrender.com\";\r\n\r\nconst ManageGallery = () => {\r\n  const [images, setImages] = useState([]);\r\n  const [file, setFile] = useState(null);\r\n  const [caption, setCaption] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  /* ===== POPUP ===== */\r\n  const [popup, setPopup] = useState({\r\n    show: false,\r\n    message: \"\",\r\n    type: \"success\", // success | error\r\n  });\r\n\r\n  const token = localStorage.getItem(\"token\");\r\n\r\n  /* ===== POPUP HANDLER ===== */\r\n  const showPopup = (message, type = \"success\") => {\r\n    setPopup({ show: true, message, type });\r\n    setTimeout(() => {\r\n      setPopup({ show: false, message: \"\", type: \"success\" });\r\n    }, 1000);\r\n  };\r\n\r\n  /* ===== FETCH IMAGES ===== */\r\n  const fetchImages = async () => {\r\n    try {\r\n      const res = await fetch(`${API}/api/gallery`);\r\n      const data = await res.json();\r\n      setImages(Array.isArray(data) ? data : []);\r\n    } catch {\r\n      showPopup(\"Failed to load gallery ‚ùå\", \"error\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchImages();\r\n  }, []);\r\n\r\n  /* ===== UPLOAD IMAGE ===== */\r\n  const uploadImage = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!file) {\r\n      showPopup(\"Please select an image\", \"error\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"image\", file);\r\n    formData.append(\"caption\", caption);\r\n\r\n    try {\r\n      await fetch(`${API}/api/gallery`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: formData,\r\n      });\r\n\r\n      setFile(null);\r\n      setCaption(\"\");\r\n      fetchImages();\r\n      showPopup(\"Image uploaded successfully ‚úÖ\", \"success\");\r\n    } catch {\r\n      showPopup(\"Upload failed ‚ùå\", \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /* ===== DELETE IMAGE ===== */\r\n  const deleteImage = async (id) => {\r\n    if (!window.confirm(\"Delete this image?\")) return;\r\n\r\n    try {\r\n      await fetch(`${API}/api/gallery/${id}`, {\r\n        method: \"DELETE\",\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      fetchImages();\r\n      showPopup(\"Image deleted successfully üóëÔ∏è\", \"success\");\r\n    } catch {\r\n      showPopup(\"Delete failed ‚ùå\", \"error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"manage-gallery\">\r\n      <h2>Manage Gallery</h2>\r\n\r\n      {/* ===== UPLOAD FORM ===== */}\r\n      <form onSubmit={uploadImage} className=\"gallery-form\">\r\n        <input type=\"file\" onChange={(e) => setFile(e.target.files[0])} required />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Caption\"\r\n          value={caption}\r\n          onChange={(e) => setCaption(e.target.value)}\r\n        />\r\n\r\n        <button type=\"submit\" disabled={loading}>\r\n          {loading ? <span className=\"btn-loader\"></span> : \"Upload\"}\r\n        </button>\r\n      </form>\r\n\r\n      {/* ===== GALLERY GRID ===== */}\r\n      <div className=\"gallery-grid\">\r\n        {images.map((img) => (\r\n          <div key={img._id} className=\"image-card\">\r\n            <img src={img.image} alt={img.caption || \"Gallery\"} />\r\n            <p>{img.caption}</p>\r\n            <button onClick={() => deleteImage(img._id)}>Delete</button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* ===== CENTER POPUP ===== */}\r\n      {popup.show && (\r\n        <div className=\"popup-overlay\">\r\n          <div className={`popup ${popup.type}`}>\r\n            {popup.type === \"success\" ? \"‚úÖ\" : \"‚ùå\"}\r\n            <p>{popup.message}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageGallery;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}